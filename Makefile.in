# @configure_input@

# Directories
prefix      := @prefix@
exec_prefix := @exec_prefix@
bindir      := @bindir@
srcdir      := @srcdir@

# Tools
CXX         := g++
INSTALL     := install

# Compiler options
CPPFLAGS    :=
CXXFLAGS    := -g
INCLUDES    := -I$(srcdir) `pkg-config --cflags rapidgl-0`
CXXOPTS     := $(CPPFLAGS) $(CXXFLAGS) $(INCLUDES)

# Linker options
LDFLAGS     :=
LIBS        := `pkg-config --libs libglfw rapidgl-0` -lPocoFoundation
LDOPTS      := $(LDFLAGS) $(LIBS)

# Files
objects     := Picker.o Sphere.o WindowAdapter.o \
               BlendNode.o BlendNodeUnmarshaller.o \
               BooleanAndNode.o BooleanAndNodeUnmarshaller.o \
               BooleanXorNode.o BooleanXorNodeUnmarshaller.o \
               SortNode.o SortNodeUnmarshaller.o

# Program
all: gander
gander: gander.cxx $(objects)
	@$(CXX) $< $(CXXOPTS) -o $@ $(objects) $(LDOPTS)
clean:
	@$(RM) gander
	@$(RM) *.o
	@$(RM) -r *.dSYM

# Objects
$(objects):
%.o: %.cxx %.h
	@$(CXX) $< $(CXXOPTS) -c -o $@

# Installation
install:
	$(INSTALL) gander $(bindir)
uninstall:
	$(RM) $(bindir)/gander

# Dependencies
BlendNodeUnmarshaller.o: BlendNode.h
BooleanAndNodeUnmarshaller.o: BooleanAndNode.h
BooleanXorNodeUnmarshaller.o: BooleanXorNode.h
SortNodeUnmarshaller.o: SortNode.h
